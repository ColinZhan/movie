function del(a,n){$.ajax({url:a+n,type:"DELETE"}).done(function(a){if(1===a.success){swal("操作成功!","已成功删除数据！","success");var o=$(".item-id-"+n);o.length>0&&o.fadeOut(1e3)}}).fail(function(){swal("网络错误！","删除失败，若长期删除失败，请联系管理员。","error")}).always(function(){console.log("完成。")})}function arrayToStr(a,n){var o=[];switch(n){case 0:return a?a.join(","):a;case 1:for(var t=0;t<=a.length-1;t++)o.push(a[t].name)}return o?o.join(","):o}$(function(){$(".del").click(function(a){var n=$(a.target).data("id"),o=window.location.pathname.toString()+"?id=";swal({title:"您确定要删除吗？",type:"warning",showCancelButton:!0,closeOnConfirm:!1,confirmButtonText:"确定",confirmButtonColor:"#ec6c62"},function(){del(o,n)})}),$("#douban").blur(function(){var a=$(this).val();a&&$.ajax({url:"https://api.douban.com/v2/movie/subject/"+a,type:"GET",dataType:"jsonp",cache:!0,crossDomain:!0,jsonp:"callback"}).done(function(a){console.log("success"),console.log(a),$("#inputTitle").val(a.title),$("#inputDoctor").val(arrayToStr(a.directors,1)),$("#inputActor").val(arrayToStr(a.casts,1)),$("#inputCountry").val(arrayToStr(a.countries,0)),$("#inputLanguage").val(arrayToStr(a.languages,0)),$("#inputPoster").val(a.images.large),$("#inputYear").val(a.year),$("#inputSummary").val(a.summary)}).fail(function(){console.log("error")}).always(function(){console.log("complete")})})});